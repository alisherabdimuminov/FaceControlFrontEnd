import{_ as Y}from"./D9pBdgcG.js";import{r as K,e as Q,_ as Z,a as ee,b as ae,c as te,d as se}from"./C_W1wP7l.js";import{_ as oe}from"./Cq9Wa7h3.js";import{e as m,p as y,x as ne,o,h as i,w as n,b as p,u as e,a as b,c as _,F as w,g as B,d as V,t as R,s as h,v,a2 as re,I as x,k as g,a3 as le,a4 as de,a5 as ce,l as j,m as A,a6 as ue,a7 as pe,a8 as ie,a9 as _e,aa as me,ab as fe,ac as ge,ad as ye,G as he,r as L,ae as ve,af as be,f as xe,i as $e,ag as we,n as Be}from"./DY5YPz6z.js";import{b as D}from"./CoYbDtYK.js";import{r as Ce}from"./C2RB0JN7.js";import{u as Pe}from"./DhZM79Uq.js";import{a as O}from"./DLL7LeIM.js";const ke={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},Re=m({__name:"RangeCalendar",props:{defaultPlaceholder:{},defaultValue:{},modelValue:{},placeholder:{},pagedNavigation:{type:Boolean},preventDeselect:{type:Boolean},weekStartsOn:{},weekdayFormat:{},calendarLabel:{},fixedWeeks:{type:Boolean},maxValue:{},minValue:{},locale:{},numberOfMonths:{},disabled:{type:Boolean},readonly:{type:Boolean},initialFocus:{type:Boolean},isDateDisabled:{type:Function},isDateUnavailable:{type:Function},dir:{},nextPage:{type:Function},prevPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","update:placeholder","update:startValue"],setup(l,{emit:a}){const r=l,d=a,t=y(()=>{const{class:C,...c}=r;return c}),s=ne(t,d);return(C,c)=>(o(),i(e(re),h({class:e(v)("p-3",r.class)},e(s)),{default:n(({grid:G,weekDays:F})=>[p(e(Ge),null,{default:n(()=>[p(e(De)),p(e(Le)),p(e(Oe))]),_:1}),b("div",ke,[(o(!0),_(w,null,B(G,S=>(o(),i(e(Fe),{key:S.value.toString()},{default:n(()=>[p(e(Te),null,{default:n(()=>[p(e(I),null,{default:n(()=>[(o(!0),_(w,null,B(F,P=>(o(),i(e(ze),{key:P},{default:n(()=>[V(R(P),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),p(e(Ne),null,{default:n(()=>[(o(!0),_(w,null,B(S.rows,(P,f)=>(o(),i(e(I),{key:`weekDate-${f}`,class:"mt-2 w-full"},{default:n(()=>[(o(!0),_(w,null,B(P,u=>(o(),i(e(Se),{key:u.toString(),date:u},{default:n(()=>[p(e(Ve),{day:u,month:S.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}}),Se=m({__name:"RangeCalendarCell",props:{date:{},asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(le),h({class:e(v)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:bg-accent first:[&:has([data-selected])]:rounded-l-md last:[&:has([data-selected])]:rounded-r-md [&:has([data-selected][data-outside-view])]:bg-accent/50 [&:has([data-selected][data-selection-end])]:rounded-r-md [&:has([data-selected][data-selection-start])]:rounded-l-md",a.class)},e(d)),{default:n(()=>[g(t.$slots,"default")]),_:3},16,["class"]))}}),Ve=m({__name:"RangeCalendarCellTrigger",props:{day:{},month:{},asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(de),h({class:e(v)(e(D)({variant:"ghost"}),"h-8 w-8 p-0 font-normal data-[selected]:opacity-100","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selection-start]:bg-primary data-[selection-start]:text-primary-foreground data-[selection-start]:hover:bg-primary data-[selection-start]:hover:text-primary-foreground data-[selection-start]:focus:bg-primary data-[selection-start]:focus:text-primary-foreground","data-[selection-end]:bg-primary data-[selection-end]:text-primary-foreground data-[selection-end]:hover:bg-primary data-[selection-end]:hover:text-primary-foreground data-[selection-end]:focus:bg-primary data-[selection-end]:focus:text-primary-foreground","data-[outside-view]:text-muted-foreground data-[outside-view]:opacity-50 [&[data-outside-view][data-selected]]:text-muted-foreground [&[data-outside-view][data-selected]]:opacity-30","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through",a.class)},e(d)),{default:n(()=>[g(t.$slots,"default")]),_:3},16,["class"]))}}),Fe=m({__name:"RangeCalendarGrid",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(ce),h({class:e(v)("w-full border-collapse space-y-1",a.class)},e(d)),{default:n(()=>[g(t.$slots,"default")]),_:3},16,["class"]))}}),Ne=m({__name:"RangeCalendarGridBody",props:{asChild:{type:Boolean},as:{}},setup(l){const a=l;return(r,d)=>(o(),i(e(ue),j(A(a)),{default:n(()=>[g(r.$slots,"default")]),_:3},16))}}),Te=m({__name:"RangeCalendarGridHead",props:{asChild:{type:Boolean},as:{}},setup(l){const a=l;return(r,d)=>(o(),i(e(pe),j(A(a)),{default:n(()=>[g(r.$slots,"default")]),_:3},16))}}),I=m({__name:"RangeCalendarGridRow",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(ie),h({class:e(v)("flex",a.class)},e(d)),{default:n(()=>[g(t.$slots,"default")]),_:3},16,["class"]))}}),ze=m({__name:"RangeCalendarHeadCell",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(_e),h({class:e(v)("w-8 rounded-md text-[0.8rem] font-normal text-muted-foreground",a.class)},e(d)),{default:n(()=>[g(t.$slots,"default")]),_:3},16,["class"]))}}),Ge=m({__name:"RangeCalendarHeader",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(me),h({class:e(v)("relative flex w-full items-center justify-between pt-1",a.class)},e(d)),{default:n(()=>[g(t.$slots,"default")]),_:3},16,["class"]))}}),Le=m({__name:"RangeCalendarHeading",props:{asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(fe),h({class:e(v)("text-sm font-medium",a.class)},e(d)),{default:n(({headingValue:C})=>[g(t.$slots,"default",{headingValue:C},()=>[V(R(C),1)])]),_:3},16,["class"]))}}),Oe=m({__name:"RangeCalendarNextButton",props:{step:{},nextPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(ge),h({class:e(v)(e(D)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",a.class)},e(d)),{default:n(()=>[g(t.$slots,"default",{},()=>[p(e(K),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),De=m({__name:"RangeCalendarPrevButton",props:{step:{},prevPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(l){const a=l,r=y(()=>{const{class:t,...s}=a;return s}),d=x(r);return(t,s)=>(o(),i(e(ye),h({class:e(v)(e(D)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",a.class)},e(d)),{default:n(()=>[g(t.$slots,"default",{},()=>[p(e(Ce),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),He={class:"grid gap-3 p-5 md:p-10"},Ie={class:"flex justify-between items-center"},je={class:"relative overflow-x-auto"},Ae={class:"border-separate border-spacing-0 whitespace-nowrap table-fixed"},Ue={class:""},Ee={class:"border"},Me={class:"z-[-1] text-start p-2 border"},qe={class:"relative"},Je={class:"border hover:bg-accent/90"},We={class:"p-2 border sticky left-0 bg-background w-32 truncate"},Xe={class:"p-2 border text-center font-bold"},Ye={key:0,class:"text-green-500"},Ke={key:1,class:"text-orange-500"},Qe={key:2,class:"text-red-500"},da=m({__name:"[slug]",setup(l){const{user:a}=Pe(),r=he(),d=L([]),t=L({}),s=ve(be()),C=s.subtract({days:7}),c=L({start:C,end:s}),G=async f=>{var $;let u=await $fetch(O("employees")+`?department=${f}`,{headers:{Authorization:`Token ${($=a.value)==null?void 0:$.token}`}});u.status==="success"&&(d.value=u.data)},F=async(f,u)=>{var N;let $=await $fetch(O("employees/reports"),{method:"POST",body:JSON.stringify({start_day:f.day,start_month:f.month,start_year:f.year,end_day:u.day,end_month:u.month,end_year:u.year,department:r.params.slug.toString()}),headers:{Authorization:`Token ${(N=a.value)==null?void 0:N.token}`}});$.status==="success"&&(t.value=$.data)},S=()=>{var f,u;c.value.start&&c.value.end&&(console.log((f=c.value.start)==null?void 0:f.day),console.log((u=c.value.end)==null?void 0:u.day),F(c.value.start,c.value.end))},P=()=>{c.value.start&&c.value.end&&Be({path:O("employees/reports/xlsx"),query:{department:r.params.slug.toString(),start_day:c.value.start.day,start_month:c.value.start.month,start_year:c.value.start.year,end_day:c.value.end.day,end_month:c.value.end.month,end_year:c.value.end.year}},{external:!0})};return xe(()=>{G(r.params.slug.toString()),c.value.start&&c.value.end&&F(c.value.start,c.value.end)}),(f,u)=>{const $=Y,N=ae,H=ee,U=te,E=se,M=Z,q=Q,J=oe,W=Re,X=we;return o(),_("div",He,[p(X,null,{default:n(()=>[b("div",Ie,[p(q,null,{default:n(()=>[p(M,null,{default:n(()=>[p(H,null,{default:n(()=>[p(N,null,{default:n(()=>[p($,{to:{name:"admin"}},{default:n(()=>u[1]||(u[1]=[V("Bosh sahifa")])),_:1})]),_:1})]),_:1}),p(U),p(H,null,{default:n(()=>[p(E,null,{default:n(()=>u[2]||(u[2]=[V(" Xodimlar ")])),_:1})]),_:1})]),_:1})]),_:1}),p(J,{onClick:P},{default:n(()=>u[3]||(u[3]=[V("Yuklab olish")])),_:1})]),p(W,{modelValue:e(c),"onUpdate:modelValue":[u[0]||(u[0]=T=>$e(c)?c.value=T:null),S],class:"rounded-md border"},null,8,["modelValue"]),b("div",je,[b("table",Ae,[b("thead",Ue,[b("tr",Ee,[u[4]||(u[4]=b("th",{class:"sticky text-start p-2 border left-0 bg-background"},"Familiya, Ism va Sharifi",-1)),(o(!0),_(w,null,B(e(t),(T,k)=>(o(),_("th",Me,R(k),1))),256))])]),b("tbody",qe,[(o(!0),_(w,null,B(e(d),(T,k)=>(o(),_("tr",Je,[b("td",We,R(T.full_name),1),(o(!0),_(w,null,B(e(t),(z,Ze)=>(o(),_("td",Xe,[z[k].attendance_access==="arrived"?(o(),_("p",Ye,R(z[k].attendance_access_time),1)):z[k].attendance_access==="late"?(o(),_("p",Ke,R(z[k].attendance_access_time),1)):(o(),_("p",Qe,"-"))]))),256))]))),256))])])])]),_:1})])}}});export{da as default};
